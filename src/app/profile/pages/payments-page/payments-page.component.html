<div class="p-8 max-w-4xl mx-auto w-full min-h-screen text-base-content">
    
    <shared-header-back [title]="'Métodos de Pago'" (back)="goBack()" />

    <div class="space-y-6">
        @for (method of paymentMethods; track $index) {
            <div class="relative bg-base-200 border border-primary/20 rounded-xl p-5 shadow-sm hover:shadow-md transition-all duration-200 flex items-center justify-between">
                
                <div class="flex items-center gap-5">
                    <div 
                        class="w-14 h-9 rounded-lg flex items-center justify-center p-1 shadow-md shrink-0"
                        [ngClass]="getCardLogoStyle(method.brand)">
                        <span class="text-xs font-bold uppercase">{{ method.brand.substring(0, 4) }}</span>
                    </div>
                    
                    <div class="flex flex-col">
                        <span class="text-lg font-medium">Tarjeta {{ method.brand }}</span>
                        <div class="text-sm text-gray-500 flex items-center gap-2">
                            <span>Terminada en {{ method.last4 }}</span>
                            @if (method.isDefault) {
                                <span class="text-xs font-semibold px-2 py-0.5 rounded-full bg-green-100 text-green-600">
                                    Principal
                                </span>
                            }
                        </div>
                    </div>
                </div>

                <div class="flex items-center gap-3">
                    <button 
                        class="text-sm font-medium text-red-500 hover:text-red-700 transition-colors duration-200"
                        (click)="askToDelete(method.id)">
                        Eliminar
                    </button>
                </div>

            </div>
        }

        <div class="pt-4">
            <button 
                class="btn w-full btn-secondary"
                (click)="addNewMethod()">
                <mat-icon class="text-xl">add_circle_outline</mat-icon>
                <span class="font-semibold ml-2">Agregar nueva tarjeta</span>
            </button>
        </div>
    </div>

    <!-- Modal de confirmación -->
    <confirm-modal
        [show]="showDeleteModal"
        [modalTitle]="'¿Desea eliminar este método de pago?'"
        [icon]="'delete'"
        [iconColor]="'text-red-600'"
        [confirmText]="'Eliminar'"
        [cancelText]="'Cancelar'"
        (confirm)="confirmDelete()"
        (cancel)="closeModal()">
    </confirm-modal>

</div>
