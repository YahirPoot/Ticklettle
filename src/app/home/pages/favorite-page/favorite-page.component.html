<div class="w-full min-h-screen flex flex-col text-base-content">

  @if (!isAuthenticated()) {

    <shared-is-not-authenticated
      [message]="'Debes iniciar sesión para poder agregar tus favoritos '"
    />

  } @else {

    <!-- 1️⃣ CARGA (Siempre primero) -->
    @if (favoritesResource.isLoading()) {

      <div class="flex flex-col w-full p-4">
        <div class="w-1/3 skeleton h-10 mb-4 mt-4"></div>

        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 w-full">
          <div class="card skeleton h-48 w-full"></div>
          <div class="card skeleton h-48 w-full"></div>
          <div class="card skeleton h-48 w-full"></div>
          <div class="card skeleton h-48 w-full"></div>
          <div class="card skeleton h-48 w-full"></div>
          <div class="card skeleton h-48 w-full"></div>
        </div>
      </div>

    }

    <!-- 2️⃣ SIN DATOS -->
    @else if (!favoritesResource.hasValue() || favorites.length === 0) {

      <div class="max-w-6xl mx-auto">
        <div class="card bg-base-200 border border-base-300 rounded-lg p-6 flex flex-col items-center justify-center gap-4 w-full">

          <svg class="w-16 h-16 text-red-500 animate-pulse" viewBox="0 0 24 24" fill="none">
            <path
              d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 1 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"
              stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
              class="fill-current/5"
            />
          </svg>

          <h3 class="text-2xl font-semibold">Aún no tienes favoritos</h3>

          <p class="text-sm text-gray-500 max-w-lg text-center">
            Marca con el corazón los eventos que te interesen para encontrarlos fácilmente más tarde.
          </p>

          <div class="flex gap-3">
            <a routerLink="/" class="btn btn-primary">
              Explorar eventos
            </a>
          </div>

        </div>
      </div>

    }

    <!-- 3️⃣ HAY FAVORITOS -->
    @else {

      <!-- Navbar superior -->
      <div class="navbar bg-base-200 px-4 py-2 shadow-sm flex justify-between items-center rounded-2xl">
        <h2 class="text-lg font-semibold">Favoritos</h2>
      </div>

      <!-- Contenedor -->
      <div class="p-6 max-w-7xl mx-auto w-full">

        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">

          @for (fav of favorites; track fav.eventId) {

            <event-card
              [event]="fav.event"
              [showFavorite]="false"
              [showDelete]="true"
              (remove)="openConfirm($event, fav.event.name)">
            </event-card>

          }

        </div>

      </div>

    }

    <!-- MODAL REUTILIZABLE -->
    <confirm-modal
      [show]="showConfirm()"
      [modalTitle]="'¿Seguro que desea eliminar el evento?'"
      icon="delete"
      iconColor="text-red-600"
      confirmText="Eliminar"
      cancelText="Cancelar"
      (confirm)="confirmDelete()"
      (cancel)="cancelConfirm()"
    />

  }

</div>
