<div class="min-h-screen flex items-center justify-center p-6">
  <div class="max-w-3xl w-full bg-base-100 rounded-2xl shadow-lg p-8 border border-base-300">

    <!-- Encabezado -->
    <div class="flex items-start justify-between">
      <div>
        <h2 class="text-3xl font-bold text-primary">
          Pago completado
        </h2>
        <p class="text-sm text-base-content/70 mt-1">
          Número de orden: 
          <span class="font-medium text-base-content">
            {{ saleById?.orderNumber }}
          </span>
        </p>
      </div>

      <div class="text-right">
        <p class="text-xs text-base-content/50">Estado del pago</p>
        @if (saleById?.payment?.status === 'succeeded') {

          <div class="badge badge-success badge-lg font-medium uppercase tracking-wide">
            Pagado
          </div>
        }

        @if (saleById?.payment?.status !== 'succeeded') {
          <div class="badge badge-warning badge-lg font-semibold uppercase tracking-wide">
            {{ saleById?.payment?.status }}
          </div>
        }
      </div>
    </div>

    <!-- Grid Principal -->
    <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">

      <!-- Resumen de Venta -->
      <div class="p-5 bg-base-200 border border-base-300 rounded-xl shadow-sm">
        <h3 class="text-sm font-bold text-primary uppercase tracking-wide">
          Detalles de la venta
        </h3>

        <div class="mt-4 space-y-4 text-sm">
          <div>
            <p class="text-base-content/60">ID de venta</p>
            <p class="font-medium">{{ saleById?.saleId || '—' }}</p>
          </div>

          <div>
            <p class="text-base-content/60">Comprador</p>
            <p class="font-medium">{{ saleById?.buyerName }}</p>
          </div>

          <div>
            <p class="text-base-content/60">Fecha</p>
            <p class="font-medium">
              {{ saleById?.createdAt | date: 'medium' }}
            </p>
          </div>
        </div>
      </div>

      <!-- Pago -->
      <div class="p-5 bg-gradient-to-br from-secondary/20 to-accent/20 rounded-xl shadow-sm">
        <h3 class="text-sm font-bold text-primary uppercase tracking-wide">
          Resumen del pago
        </h3>

        <div class="mt-4 space-y-4 text-sm">
          <div>
            <p class="text-base-content/60">Total pagado</p>
            <p class="text-2xl font-extrabold text-primary">
              {{ formatted(saleById?.totalAmount!) }}
            </p>
          </div>

          <div>
            <p class="text-base-content/60">Método de pago</p>
            <p class="font-medium capitalize">
              {{ saleById?.paymentMethod }}
            </p>
          </div>

          <div>
            <p class="text-base-content/60">Monto cargado</p>
            <p class="font-semibold text-base-content">
              {{ formatted(saleById?.payment?.amount!) }}
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Lista de Items -->
    <div class="mt-8">
      <h4 class="text-sm font-bold text-primary uppercase tracking-wide mb-2">
        Artículos de la orden
      </h4>

      <ul class="divide-y divide-base-300 rounded-lg overflow-hidden">
        @for (it of saleById?.items; track $index) {
          <li 
            class="card bg-base-200 hover:border-primary/35 transition shadow-sm hover:shadow-md mb-2"
          >
          <div class="card-body flex flex-row items-center justify-between">
            <div>
              <p class="font-semibold uppercase text-base-content">{{ it.itemName }}</p>
              <p class="text-xs text-base-content/60">Tipo: {{ it.type }}</p>
            </div>

            <div class="text-right">
              <p class="text-sm text-base-content/60">
                Cantidad: <span class="text-base-content">{{ it.quantity }}</span>
              </p>
              <p class="text-primary font-bold">
                {{ formatted(it.totalPrice || (it.unitPrice * it.quantity)) }}
              </p>
            </div>
          </div>
          </li>
        }
      </ul>
    </div>

    <!-- Botón -->
    <div class="mt-10 flex justify-center">
      <a 
        [routerLink]="['/', 'tickets']"
        class="btn btn-primary btn-lg px-10"
      >
        Ver mis boletos
      </a>
    </div>

  </div>
</div>
