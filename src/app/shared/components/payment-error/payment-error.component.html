<div class="w-full max-w-lg mx-auto p-4">
    <div role="alert" class="rounded-lg border border-red-600 bg-red-50 p-4">
        <div class="flex items-start gap-3">
            <svg class="h-8 w-8 text-red-600 flex-shrink-0" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M12 9v4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12 17h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M10.29 3.86l-7 12A2 2 0 0 0 5 19h14a2 2 0 0 0 1.71-3.14l-7-12a2 2 0 0 0-3.42 0z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            
            <div class="flex-1">
                <h3 class="text-lg font-semibold text-red-800">Error al procesar el pago</h3>
                <p class="mt-1 text-sm text-red-700">
                    No se pudo procesar la tarjeta. Por favor intenta otra tarjeta o método de pago.
                </p>
                
                @if (errorMessage()) {
                    <div class="mt-3 bg-white rounded p-2 border text-sm text-gray-700">
                        <div class="flex items-center justify-between">
                            <div class="truncate pr-4" title="{{ errorMessage() }}">
                                Código: <span class="font-medium">{{ shortError }}</span>
                            </div>
                            <div class="flex gap-2">
                                <button type="button" class="btn btn-xs btn-outline" (click)="copyError()" aria-label="Copiar código de error">Copiar</button>
                                <button type="button" class="btn btn-xs" (click)="showDetails.set(!showDetails())" aria-expanded="{{ showDetails() }}">Detalles</button>
                            </div>
                        </div>
                    
                        @if (showDetails()) {
                            <pre class="mt-2 max-h-40 overflow-auto text-xs whitespace-pre-wrap">{{ errorMessage() }}</pre>
                        }
                    </div>
                }
                
                <div class="mt-4 flex gap-2">
                    <button type="button" class="btn btn-sm btn-success" (click)="onRetry()" [disabled]="loading()">
                        @if (loading()) {
                            <span>Intentando…</span>
                        } @else {
                            <span>Reintentar</span>
                        }
                    </button>
                
                    <button type="button" class="btn btn-sm btn-ghost" (click)="onChangeMethod()">Usar otro método</button>
                
                    <button type="button" class="btn btn-sm btn-outline" (click)="contactSupport()">
                        Contactar soporte
                    </button>
                </div>
                
                <p class="mt-3 text-xs text-gray-500">
                    Si el problema persiste, intenta con otra tarjeta, verifica los datos (nombre, fecha y CVC) o usa otro método.
                </p>
            </div>
        </div>
    </div>
</div>