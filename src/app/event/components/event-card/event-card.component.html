<div>
    <article class="flex-shrink-0 snap-start basis-full sm:basis-1/2 md:basis-1/3 bg-gray-100 rounded-lg p-3 overflow-hidden shadow-sm">
        <div class="flex items-start gap-4">
            <div class="flex-1">
                <p class="text-sm text-gray-600">{{ event().organizingHouse.name }}</p>
                <h4 class="text-xl font-semibold mt-1">{{ event().name.length > 30 ? (event().name | slice: 0 : 30) + '...' : event().name }}</h4>
                <p class="text-sm text-gray-600 mt-2 line-clamp-3">{{ event().description.length > 2 ? (event().description | slice: 0 : 20) + '...' : event().description || 'Sin Descripci√≥n'}} </p>
            </div>
            <figure class="w-20 h-20 md:w-24 md:h-24 flex-shrink-0">
                <img [src]="event().imageUrl || 'assets/default_image.png'" alt="Evento {{ event().name }}" class="w-full h-full object-cover rounded-md bg-gray-200" />
            </figure>
        </div>

        <div class="mt-3 px-1 pb-1 flex items-center justify-between">
            <a class="text-red-600 font-semibold text-sm" [routerLink]="['', 'detail-event', event().eventId]">Ver detalles</a>

            @if (showFavorite) {
                <button
                    [disabled]="!isAuthenticated()"
                    class="p-1 rounded-full border border-gray-300 bg-white shadow-sm"
                    aria-label="Favorito"
                    (click)="toggleFavorite($event)">
                    @if (isFavorited()) {
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-600" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                        </svg>
                    }
                    @if (!isFavorited()) {
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-800" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M20.8 4.6a5.5 5.5 0 0 0-7.8 0L12 5.6l-1-1a5.5 5.5 0 1 0-7.8 7.8L12 21l8.8-8.6a5.5 5.5 0 0 0 0-7.8z"/>
                        </svg>
                    }
                </button>
            } @else if (showDelete) {
                <button
                    class="btn btn-ghost btn-sm p-0"
                    aria-label="Eliminar evento"
                    (click)="onRemove($event)">
                    <mat-icon>delete</mat-icon>
                </button>
            }
        </div>
    </article>
</div>
